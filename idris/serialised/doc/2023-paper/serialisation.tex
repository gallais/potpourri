\section{Serialising Data}\label{sec:serialising}

So far all of our example programs involved taking an inductive value
apart and computing a numeric value.
%
But we may instead want to compute another value in serialised form.
%
In this section we are going to spell out how we can define high-level
constructs allowing users to do just that in a correct-by-construction
manner.



\ExecuteMetaData[SaferIndexed.idr.tex]{serialisedmap}

%% \subsection{Generic Traverse}
%% \ExecuteMetaData[SaferIndexed.idr.tex]{traverse}


\subsection{Executing a Serialisation Action}

Now that we can describe actions serialising a value to a buffer,
the only basic building block we are missing is a function actually
performning such actions.
%
This is provided by the \IdrisFunction{execSerialising} function
declared below.

\ExecuteMetaData[SaferIndexed.idr.tex]{execSerialising}

By executing a (\IdrisType{Serialising} \IdrisBound{cs} \IdrisBound{t}), we
obtain an \IdrisType{IO} process returning a pointer to the tree \IdrisBound{t}
stored in a buffer.
%
We can then either compute further with this tree (e.g. by calling
\IdrisFunction{sum} on it), or write it to a file for safekeeping.
