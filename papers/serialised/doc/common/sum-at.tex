\begin{lstlisting}
int sumAt (uint8_t buf[], int *ptr) {
  uint8_t tag = buf[*ptr]; (*ptr)++;
  switch (tag) {
    case 0: return 0;
    case 1:
      int m = sumAt(buf, ptr, str);
      uint8_t val = buf[*ptr]; (*ptr)++;
      int n = sumAt(buf, ptr, str);
      return (m + (int) val + n);
    default: exit(-1); }}
\end{lstlisting}
