\begin{lstlisting}
int sumAt (int buf[], int *ptr, int *acc) {
  int tag = buf[*ptr]; (*ptr)++;
  switch (tag) {
    case 0: return 0;
    case 1:
      sumAt(buf, ptr, acc);
      int val = buf[*ptr]; (*ptr)++;
      *acc += val;
      sumAt(buf, ptr, acc);
      return 0;
    default: exit(-1); }}
\end{lstlisting}
