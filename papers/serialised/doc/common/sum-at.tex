\begin{lstlisting}
void sumAt (uint8_t buf[], int *ptr, int *res) {
  uint8_t tag = buf[*ptr]; (*ptr)++;
  switch (tag) {
    case 0: return;
    case 1:
      sumAt(buf, ptr, res);
      uint8_t val = buf[*ptr]; (*ptr)++;
      *res += (int) val;
      sumAt(buf, ptr, res);
      return;
    default: exit(-1); }}
\end{lstlisting}
